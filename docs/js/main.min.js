var finna={init:function(){$.each([],function(t,n){void 0!==finna[n]&&finna[n].init()})}};$(document).ready(function(){finna.init()}),$(document).ready(function(){VuFind.truncate.initTruncate(".finna-truncate")}),$(document).ready(function(){$(".finna-tabs-nav").each(function(){var t=$(this).find(".finna-nav > li.active > ul, .finna-nav > li.active-trail > ul");0<t.length&&0<$(this).height()&&$(this).css("height",$(this).children(".finna-nav").height()+t.height())})}),finna.layout=function(i){function t(){var t=i||$(document),n=[];t.find('[data-toggle="tooltip"]').on("show.bs.tooltip",function(){var t=$(this);$(n).each(function(){$(this)[0]!==t[0]&&$(this).tooltip("hide")}),n=[t]}).on("hidden.bs.tooltip",function(t){$(t.target).data("bs.tooltip").inState.click=!1}).tooltip({trigger:"click",viewport:".pl-js-pattern-example"}),t.find('[data-toggle="tooltip"] > i').on("click",function(t){t.preventDefault()}),$("html").on("click",function(t){void 0===$(t.target).parent().data("original-title")&&void 0===$(t.target).data("original-title")&&($('[data-toggle="tooltip"]').tooltip("hide"),n=[])})}return{isTouchDevice:function(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints},initToolTips:t,init:function(){t()}}}(),$(document).ready(function(){finna.layout.init()}),VuFind.register("truncate",function(){return{initTruncate:function(t,m,w){var T=[];$(t).each(function(){var t=$(this),n=void 0!==m?t.find(m):t.data("element")?t.find(t.data("element")):null,i=void 0===w?function(t){return t}:w,e=void 0!==t.data("rows")?t.data("rows"):3,a=r=t.data("label");void 0===r&&(a=t.data("more-label")?t.data("more-label"):VuFind.translate("show_more"),r=t.data("less-label")?t.data("less-label"):VuFind.translate("show_less"));var o,s,l,c,d,r,h,u,f,g,p=t.data("btn-class")?" "+t.data("btn-class"):"",b=t.data("top-toggle")||1/0,v=!(!n||!t.data("in-place-toggle"))&&t.data("in-place-toggle");n?(g=n.parent(),h=n.length&&n.prop("tagName").toLowerCase(),d=n.length?" "+n.prop("class"):"",o=t.find(n).length||0,(s=e<o)&&n.each(function(t){t===e&&$(this).addClass("truncate-start"),e<=t&&($(this).hide(),$(this).addClass("truncate-toggle"))})):(h="div",d="",c=0<(g=t).children().length?(c=t.children().first()).is("div")?parseFloat(c.height()):parseFloat(c.css("line-height").replace("px","")):parseFloat(t.css("line-height").replace("px","")),o=Math.ceil(t.height()/c),(s=e<o)&&(l=e*c,t.css("height",l+"px"))),s&&(a='<button type="button" class="btn more-btn'+p+'">'+a+' <i class="fa fa-arrow-down" aria-hidden="true"></i></button>',r='<button type="button" class="btn less-btn'+p+'">'+r+' <i class="fa fa-arrow-up" aria-hidden="true"></i></button>',h=$("<"+h+' class="more-less-btn-wrapper'+d+'"></'+h+">"),u=h.clone().append(i(a+r)),(f=b<o&&h.clone().append(i(r)))&&(n?f.prependTo(g):f.insertBefore(g)),v?u.insertBefore(g.find(".truncate-start")):n?u.appendTo(g):u.insertAfter(g),u.find(".less-btn").hide(),f&&f.hide(),g=function(){u.find(".less-btn").hide(),f&&f.hide(),u.find(".more-btn").show(),n?t.find(".truncate-toggle").toggle():0===l?t.hide():t.css("height",l+"px"),u.find(".more-btn").focus()},u.find(".less-btn").click(g),f&&f.find(".less-btn").click(g),u.find(".more-btn").click(function(){$(this).hide(),u.find(".less-btn").show(),f?(f.show(),f.find(".less-btn").focus()):u.find(".less-btn").focus(),n?t.find(".truncate-toggle").toggle():0===l?t.show():t.css("height","auto")})),t.addClass("truncate-done"),0===l&&T.push(t)}),T.forEach(function(t){t.hide(),t.css("height","auto")})}}});