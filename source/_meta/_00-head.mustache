<!DOCTYPE html>
<html class="{{ htmlClass }}">
  <head>
    <title>{{ title }}</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <link
      rel="stylesheet"
      href="../../styles/style.min.css?{{ cacheBuster }}"
      media="all"
    />
    <link
      rel="stylesheet"
      href="../../styles/patternlab/pattern-scaffolding.css?{{ cacheBuster }}"
      media="all"
    />
    <link
      rel="stylesheet"
      href="../../styles/patternlab/pattern-scaffolding.css?{{ cacheBuster }}"
      media="all"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mockjax/2.5.1/jquery.mockjax.min.js"></script>

    <script type="text/javascript" src="../../js/vendor/mockjax.min.js"></script>
    <script type="text/javascript" src="../../js/main.min.js"></script>

    <script type="text/javascript">
      var tags = [{
          id: '1',
          value: 'Testing 1'
        },
        {
          id: '2',
          value: 'Testing 2'
        }
      ];
    
      $.mockjax([{
          url: '/finna/tags',
          type: 'GET',
          responseTime: 2000,
    
          response: function() {
            this.responseText = {
              'tags': tags
            };
          }
        },
        {
          url: '/finna/tags',
          type: 'POST',
          responseTime: 1000,
          response: function(settings) {
            tags.push({
              id: Math.floor(Math.random() * 100 + 1).toString(),
              value: JSON.parse(settings.data).tag
            });

            console.log('Perkele');

            this.responseText = {
              'status': 'OK'
            };
          }
        },
        {
          url: '/finna/tags',
          type: 'DELETE',
          responseTime: 1000,
          response: function(settings) {
            var deleteTagId = JSON.parse(settings.data).id;
    
            var newTags = tags.filter(function(tag) {
              return tag.id !== deleteTagId;
            });
    
            tags = newTags.slice(0);
    
            this.responseText = {
              'status': 'OK'
            };
          }
        }
      ]);
    </script>
    <!-- Begin Pattern Lab (Required for Pattern Lab to run properly) -->
    {{{ patternLabHead

    }}}
    <!-- End Pattern Lab -->
  </head>
  <body class="{{ bodyClass }}"></body>
</html>
