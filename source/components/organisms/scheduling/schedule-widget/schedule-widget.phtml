<?php
$widget = $target == 'widget';
?>

<div class="schedule-widget organisation-info<?= $showDetails ? ' with-details' : '' ?><?= $widget ? ' organisation-info-widget' : '' ?>" data-parent="<?= $id; ?>" data-target="<?= $target; ?>">
  <?php if ($widget) : ?>
    <h2>Heading</h2>
    <div class="loader js-loader">
      <?= $this->render('components/molecules/messaging/loader/loader.phtml'); ?>
    </div>
    <div class="hide">
      <div class="<?= $showDetails ? 'info-col ' : ''; ?>info">
        <div class="organisation-dropdown-holder">
          <?= $this->render('components/molecules/navigation/dropdowns/sort.phtml', ['items' => [], 'label' => 'Select library', 'dropdownClass' => 'organisation']) ?>
        </div>
        <span class="js-is-open js-open is-open open js-info-element">
          <?= $open; ?>
        </span>
        <span class="js-is-open js-closed is-open closed js-info-element">
          <?= $closed; ?>
        </span>
      <?php endif; ?>
      <div class="schedules">
        <div class="week-navigation week-navi-holder">
          <button class="week-navigation-control js-prev-week js-week-navigate" data-dir="-1">
            <i class="fa fa-arrow-left" aria-hidden="true"></i>
            <span class="sr-only">Previous week</span>
          </button>
          <span>
            <?= $week; ?> <span class="js-week-number">x</span>
          </span>
          <button class="week-navigation-control js-next-week js-week-navigate" data-dir="+1">
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
            <span class="sr-only">Next week</span>
          </button>
        </div>
        <div class="loader js-loader">
          <?= $this->render('components/molecules/messaging/loader/loader.phtml'); ?>
        </div>
        <div class="js-opening-times-week opening-times-week">
          <div class="day-container"></div>
        </div>
        <div class="js-no-schedules info-element js-info-element">
          <?= $notAvailable; ?>
        </div>
        <div class="js-mobile-schedules mobile-schedules info-element js-info-element"></div>
      </div>
      <div class="js-schedules-info schedules-info info-element js-info-element">
        <p><?= $schedulesInfo; ?></p>
      </div>
      <?php if ($widget && $showDetails) : ?>
      </div>
      <div class="details details-col">
        <a href="#" data-href="<?= $organisationHomeUrl; ?>" class="facility details">
          <img src="<?= $organisationPlaceholderImage; ?>" alt="" class="js-facility-image" />
        </a>
        <div class="contact-links">
          <?= $this->render('components/molecules/tooltips/tooltip/tooltip.phtml', ['buttonClasses' => ['btn btn-open-widget info-element js-info-element js-email'], 'position' => 'bottom', 'buttonText' => "<i class='fa fa-at'><span class='sr-only'>Email</span></i>", 'content' => "<ul><dl><a href='mailto:test.test@test.fi'>test.test@test.fi</a></dl></li>"]) ?>

          <?= $this->render('components/molecules/tooltips/tooltip/tooltip.phtml', ['buttonClasses' => ['btn btn-open-widget info-element js-info-element js-phone'], 'position' => 'bottom', 'buttonText' => "<i class='fa fa-phone-square'><span class='sr-only'>Phone</span></i>", 'content' => "<ul><dl><a href='mailto:test.test@test.fi'>test.test@test.fi</a></dl></li>"]) ?>

          <a href="https://opas.matka.fi/?to=Linnankatu%202,%20Turku" target="_blank" class="js-route info-element js-info-element">
            <span class="btn">
              <i class="fa fa-bus"></i>
              <span class="sr-only">Reittiohjeet</span>
            </span>
          </a>

          <a href="<?= $organisationHomeUrl; ?>">
            <span class="btn">
              <i class="fa fa-bus"></i>
              <span class="sr-only">Reittiohjeet</span>
            </span>
          </a>

          <a href="<?= $organisationHomeUrl; ?>" target="_blank" class="js-facebook info-element js-info-element">
            <span class="btn">
              <i class="fa fa-facebook-square"></i>
              <span class="sr-only">Facebook</span>
            </span>
          </a>
        </div>

        <div class="js-map map info-element js-info-element">
          <a href="https://www.google.com/maps?q=Linnankatu+2+Turku" target="_blank">
            <i class="fa fa-map-marker">
            </i>
            <span class="js-map-address">Linnankatu 2, 20100 Keskusta (Turku)</span>
          </a>
        </div>

        <div class="js-details-link info-element js-info-element">
          <a href="#" data-href="<?= $organisationHomeUrl; ?>" class="details">
            <i class="fa fa-home"></i>
            Palvelupisteen tiedot
          </a>
        </div>

        <div class="js-services services">
          <span class="btn btn-open-widget btn-round js-service-wifi info-element js-info-element" title="Langaton verkko">
            <i class="fa fa-wifi"></i>
            <span class="sr-only">Langaton verkko</span>
          </span>
          <span class="btn btn-open-widget btn-round js-service-print info-element js-info-element" title="Tulostin">
            <i class="fa fa-print"></i>
            <span class="sr-only">Tulostin</span>
          </span>
        </div>
      </div>
    </div>
  <?php endif; ?>
</div>

<template class="js-time-row-template">
  <div class="cell js-date"></div>
  <div class="cell description">
    <span class="js-name"></span>
    <span class="js-staff">
      <?= $staffAvailable; ?>
    </span>
    <span class="info js-info"></span>
    <span class="js-selfservice hide">
      <?= $selfService; ?>
    </span>
  </div>
  <div class="cell js-time-container"></div>
</template>

<template class="js-time-template">
  <span class="js-period">
    <span class="js-opens"></span> - <span class="js-closes"></span>
  </span>
  <span class="js-closed hide">
    <?= $closed; ?>
  </span>
</template>

<template class="js-mobile-schedule-link-template">
  <a href="#" target="_blank">
    Template link
  </a>
</template>
